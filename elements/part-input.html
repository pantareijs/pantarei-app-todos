<template-element id="part-input">
  <template>
    <style>
      :host {
        display: block;
      }

      #input {
        border: 0;
        background: transparent;
        font-size: inherit;
        outline: none;
        height: 30px;
        width: 100%;
        max-width: 300px;
        border-bottom: 2px solid;
        border-bottom-color: #eee;
        transition: border-bottom-color ease-out .2s;
      }
      #input:focus {
        border-bottom-color: #333;
      }
    </style>

    <input id="input" placeholder="What needs to be done?" autofocus on-keypress="on_keypress">

  </template>
</template-element>

<script>
  class PartInput extends pantarei.Element {

    static get is () { return 'part-input' }

    on_keypress (event) {
      let input = this.refs.input
      if (event.which !== 13) {
        return
      }
      let text = input.value.trim()
      if (!text) {
        return
      }
      this.action('create_todo', { text: text })
      input.value = ''
    }

  }

  window.customElements.define(PartInput.is, PartInput)
</script>