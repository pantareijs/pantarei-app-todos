<link rel="import" href="part-header.html">
<link rel="import" href="part-input.html">
<link rel="import" href="part-list.html">
<link rel="import" href="part-info.html">
<link rel="import" href="part-footer.html">

<template-element id="app-container">
  <template>
    <style>
      :host {
        display: block;
      }

      #container {
        display: flex;
        flex-direction: column;
        box-sizing: border-box;
        min-height: 100vh;
        width: 100%;
        padding: 3%;
      }

      #main {
        flex: 1;
        max-width: 300px;
      }
    </style>

    <div id="container" on-action="on_action">
      <part-header id="header" attr-aria="state.aria"></part-header>
      <div id="main">
        <part-input id="input"></part-input>
        <part-list id="list" prop-todos="state.todos"></part-list>
        <part-info id="info" prop-state="state"></part-info>
      </div>
      <part-footer id="footer"></part-footer>
    </div>

  </template>
</template-element>

<script src="../scripts/app-todos.js"></script>
<script>
  class AppContainer extends pantarei.Element {

    static get is () { return 'app-container' }

    static get props () {
      return {
        state: { value: { aria: 1 } }
      }
    }

    constructor () {
      super()
      this.app = new AppTodos()
      this.state = this.app.state
      this.state.aria = 'hello'
    }

    on_action (event, detail) {
      let name = detail.name
      let data = detail.data
      let action = this.app[name]
      if (!action) {
        console.warn(`action ${action} undefined`)
        return
      }
      action.call(this.app, data)
      this.state = this.app.state
    }

  }

  window.customElements.define(AppContainer.is, AppContainer)
</script>